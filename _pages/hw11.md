---
title: 第11周作业：复数结构体
layout: post
---

### 第1关：复数结构体

```cpp
#include <iostream>
using namespace std;
struct Complex {
    int r;
    int i;

    Complex() {}
    Complex(int A, int B) {
        r = A;
        i = B;
    }
};

ostream &operator<<(ostream &os, const Complex &c)
{
    os << c.r;
    if (c.i != 0) {
        if (c.i > 0) os << '+';
        os << c.i << 'i';
    }
    return os;
}

Complex operator+(Complex c1, Complex c2)
{
    return Complex(c1.r + c2.r, c1.i + c2.i);
}

Complex operator*(Complex c1, Complex c2)
{
    return Complex(c1.r * c2.r - c1.i * c2.i, c1.i * c2.r + c2.i * c1.r);
}

int main()
{
    Complex x, y;
    cin >> x.r >> x.i >> y.r >> y.i;
    cout << "x = ";
    cout << x << endl;
    cout << "y = ";
    cout << y << endl;
    cout << "x += y; x = ";
    x = x + y;
    cout << x << endl;
    cout << "y *= x; y = ";
    y = y * x;
    cout << y << endl;
    cout << "x + y = ";
    cout << x + y << endl;
    cout << "y * x = ";
    cout << y * x << endl;
    cout << "x = ";
    cout << x << endl;
    cout << "y = ";
    cout << y << endl;
    return 0;
}

```

### 第2关：通讯录结构体

```cpp
#include <iostream>

using namespace std;

struct st
{
    char name[21];
    int year;
    int month;
    int day;
    char tel[12];
    char address[51];
};

bool compare(st &p1, st &p2)
{
    if (p1.year < p2.year) return 1;
    else if (p1.year > p2.year) return 0;

    if (p1.month < p2.month) return 1;
    else if (p1.month > p2.month) return 0;
    else return p1.day < p2.day;
}

int main(void)
{
    int n;
    cin >> n;
    st *p = new st[n];

    for (int i = 0; i < n; i++) {
        cin >> p[i].name;
        cin >> p[i].year;
        cin >> p[i].month;
        cin >> p[i].day;
        cin.get();
        cin.getline(p[i].tel, 12, ' ');
        cin.getline(p[i].address, 51);
    }

    st tmp;
    for (int i = 1; i <= n - 1; i++) {
        for (int j = 0; j < n - i; j++) {
            if (compare(p[j], p[j + 1])) {
                tmp = p[j];
                p[j] = p[j + 1];
                p[j + 1] = tmp;
            }
        }
    }

    for (int i = 0; i < n; i++) {
        cout << p[i].name << ' ';
        cout << p[i].year << ' ';
        cout << p[i].month << ' ';
        cout << p[i].day << ' ';
        cout << p[i].tel << ' ';
        cout << p[i].address << endl;
    }
    delete []p;
    return 0;
}

```

### 第3关：改错题

```cpp
#include <iostream>
using namespace std;

struct List
{
    int num;
    List *next;
};

int main()
{
    List *head,*p,*q;
    int num;

    head = NULL;
    /* 1 注释掉无用输出 */
    //cout << "请输入若干个正整数（-1结束）\n";
    cin >> num;
    while(num != -1)
    {
        p = new List;
        p->num = num;
        /* 2 应该修改p的next成员*/
        // head = p->next;
        p->next = head;
        head = p;
        cin >> num;
    }

    /* 1 注释掉无用输出 */
    //cout << "按照输入顺序逆序输出\n";

    /* 3 退出条件有误 */
    // for(p = head; p->next != NULL; p = p->next)
    for(p = head; p != NULL; p = p->next)
    {
        cout << p->num << " ";
    };
    cout << endl;

    for(p = head; p != NULL; p = q)
    {
        q = p->next;
      delete p;
    }

    return 0;
}
```

### 第4关：【附加题】反转链表

```cpp
ListNode* reverseList(ListNode* head) {

    ListNode* prev = NULL, *curr = head, *next;
    while (curr) {
        /* 保存下一个节点 */
        next = curr->next;
    
        /* 反转当前节点的指向 */
        curr->next = prev;

        /* 移动节点 */
        prev = curr;            
        curr = next;            
    }
    return prev;
}
```