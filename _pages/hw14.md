---
title: 第14周作业：类
layout: post
---

### 第1关：复数类

 - `class.h`

```cpp
#ifndef CLASS_H
#define CLASS_H

#include <iostream>
#include <iomanip>

class Complex
{
private:
    double r;
    double i;
public:
    Complex(double x = 0, double y = 0):r(x), i(y){};
    Complex operator+(const Complex &);
    Complex operator-(const Complex &);
    Complex operator*(const Complex &);
    Complex operator/(const Complex &);
    friend std::ostream &operator<<(std::ostream &, const Complex&);
};


#endif /* CLASS_H */
```

 - `class.cpp`

```cpp
#include "class.h"

Complex Complex::operator+(const Complex &that)
{
    return Complex(r + that.r, i + that.i);
}

Complex Complex::operator-(const Complex &that)
{
    return Complex(r - that.r, i - that.i);
}

Complex Complex::operator*(const Complex &that)
{
    return Complex(r * that.r - i * that.i, i * that.r + r * that.i);
}

Complex Complex::operator/(const Complex &that)
{
    double a, b, p;
    a = r * that.r + i * that.i;
    b = i * that.r - r * that.i; 
    p = that.r * that.r + that.i * that.i;
    
    return Complex(a / p, b / p);
}

std::ostream &operator<<(std::ostream &os, const Complex &c)
{
    os << std::fixed << std::setprecision(2);
    os << c.r << " " << c.i;
    return os;
}
```

 - `main.cpp`

```cpp
#include <iostream>
#include <iomanip>

#include "class.h"

using namespace std;

int main(){
    double x, y;

    cin >> x >> y;
    Complex c1(x, y);
    cin >> x >> y;
    Complex c2(x, y);

    cout << c1 + c2 << endl;
    cout << c1 - c2 << endl;
    cout << c1 * c2 << endl;
    cout << c1 / c2 << endl;

    return 0;
}
```


### 第2关：字符串类

 - `class.cpp`

```cpp
#include "class.h"

String::String(char * str)
{
    if (str == NULL) {
        myLen = 0;
    } else {
        myLen = strlen(str);
    }
    myStr = new char[myLen + 1];
    strncpy(myStr, str, myLen + 1);
    myStr[myLen] = 0;
}

String::String(String &str)
{
    myLen = str.myLen;
    myStr = new char[myLen + 1];
    strncpy(myStr, str.myStr, myLen + 1);
}

String::~String()
{
    delete[] myStr;
}

int String::length()
{
    return myLen;
}

String String::substr(int start, int n)
{
    char *tmp = new char[n + 1];
    strncpy(tmp, myStr + start, n);
    tmp[n] = 0;
    String new_str(tmp);
    delete[] tmp;
    return new_str;
}

int String::find_first_of(char c)
{
    for (int i = 0; myStr[i] != 0; i++) {
        if (myStr[i] == c) {
            return i;
        }
    }
    return -1;
}

void String::add_before(int index, char c)
{
    char *tmp = new char[myLen + 2];
    strncpy(tmp, myStr, index);
    tmp[index] = c;
    strncpy(tmp + index + 1, myStr + index, myLen - index + 1);
    delete[] myStr;
    myStr = tmp;
    myLen++;
}

void String::delete_at (int index)
{
    for (int i = index; myStr[i] != 0; i++) {
        myStr[i] = myStr[i + 1];
    }
    myLen--;
}

void String::printStr()
{
    std::cout << myStr << std::endl;
}

```